<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Animated Lyrics</title>

    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500&display=swap" rel="stylesheet">

    <style>
        body {
            background: #0f0f0f;
            color: #f5f5f5;
            font-family: 'Cormorant Garamond', serif;
            font-size: 22px;
            margin: 0;
            height: 100vh;

            display: flex;
            justify-content: center;
            align-items: center;
        }

        #lyrics {
            text-align: center;
            width: 100%;
            max-width: 800px;
            position: relative;
            z-index: 2;
        }

        .line {
            margin-bottom: 14px;
            opacity: 0;
            animation: fadeIn 1.5s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== LOVE RAIN (SVG) ===== */

        #loveWrapper {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 1;
        }

        .love {
            position: absolute;
            width: 22px;
            height: 22px;
            animation: loveLife 3s ease forwards;
        }

        @keyframes loveLife {
            0% {
                opacity: 0;
                transform: scale(0.6);
            }
            30% {
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: scale(1);
            }
        }

        /* ===== OVERLAY PLAY ===== */
#overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
    backdrop-filter: blur(6px);
}

.overlay-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 18px;
}

.play-btn {
    width: 110px;
    height: 110px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.92);
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 14px 40px rgba(0,0,0,0.35);
    cursor: pointer;
    position: relative;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    animation: pulse 1.8s infinite;
}

.play-btn:active {
    transform: scale(0.96);
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}

.play-icon {
    width: 0;
    height: 0;
    border-left: 26px solid #000;
    border-top: 16px solid transparent;
    border-bottom: 16px solid transparent;
    margin-left: 6px;
}

.tap-text {
    font-size: 18px;
    color: #fff;
    letter-spacing: 0.5px;
    opacity: 0.9;
}

/* Pulse animation */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

    </style>
</head>
<body>

<div id="lyrics"></div>
<div id="loveWrapper"></div>

<!-- OVERLAY UNTUK MEMAKSA INTERAKSI -->
<div id="overlay">
    <div class="overlay-content">
        <div class="play-btn" id="playBtn">
            <div class="play-icon"></div>
        </div>
        <div class="tap-text">Tap to play</div>
    </div>
</div>

<!-- AUDIO -->
<audio id="bgMusic" src="lagu.mp3" loop></audio>

<script>
    const lyrics = [
        { text: "Do you think I have forgotten?", speed: 100, delay: 300 },
        { text: "Do you think I have forgotten?", speed: 100, delay: 5000 },
        { text: "Do you think I have forgotten", speed: 100, delay: 4500 },
        { text: "about you?", speed: 200, delay: 6000 },
        { text: "There was something bout you that now I cant remember", speed: 80, delay: 4500 },
        { text: "Its the same damn thing that made my heart surrender", speed: 100, delay: 3600 },
        { text: "And I miss you on a train, I miss you in the morning", speed: 100, delay: 4700 },
        { text: "I never know what to think about", speed: 100, delay: 5600 },
        { text: "I think about youu.", speed: 100, delay: 5400 }
    ];

    const container = document.getElementById("lyrics");
    const loveWrapper = document.getElementById("loveWrapper");
    const overlay = document.getElementById("overlay");
    const playBtn = document.getElementById("playBtn");
    const bgMusic = document.getElementById("bgMusic");

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function animateText(text, speed, isLast = false) {
        const line = document.createElement("div");
        line.className = "line";
        container.appendChild(line);

        for (let char of text) {
            line.textContent += char;
            await sleep(speed);
        }

        if (isLast) {
            await sleep(300);
            spawnLoves();
        }
    }

    async function singSong() {
        for (let i = 0; i < lyrics.length; i++) {
            await sleep(lyrics[i].delay);
            animateText(
                lyrics[i].text,
                lyrics[i].speed,
                i === lyrics.length - 1
            );
        }
    }

    function spawnLoves() {
        const count = 28;

        for (let i = 0; i < count; i++) {
            setTimeout(() => {
                const love = document.createElement("div");
                love.className = "love";

                love.style.left = Math.random() * 100 + "%";
                love.style.top = Math.random() * 100 + "%";
                love.style.transform += ` scale(${0.6 + Math.random() * 0.6})`;

                love.innerHTML = `
                    <svg viewBox="0 0 24 24" width="100%" height="100%">
                        <path d="M12 21s-7-4.6-9.5-9.2C.6 7.2 3.1 4 6.5 4c1.8 0 3.4 1 4.5 2.6C12.1 5 13.7 4 15.5 4 18.9 4 21.4 7.2 21.5 11.8 19 16.4 12 21 12 21z"
                              fill="none" stroke="#fff" stroke-width="1.5" />
                    </svg>
                `;

                loveWrapper.appendChild(love);

                setTimeout(() => love.remove(), 3000);
            }, i * 80);
        }
    }

    // ===== INTERAKSI PLAY =====
    playBtn.addEventListener("click", async () => {
        await bgMusic.play();   // wajib pakai user interaction
        overlay.style.display = "none";
        singSong();
    });

</script>

</body>
</html>
